\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\geometry{margin=1in}
\usepackage{enumitem}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{xcolor}
\usepackage{hyperref}

% Preamble for packages
\usepackage{amsmath}
\usepackage{booktabs}
\usepackage{caption}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{xspace}

% Header and footer setup
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{Shipping System Development Guide}
\fancyhead[R]{Page \thepage\ of \pageref{LastPage}}
\fancyfoot[C]{\thepage}

% Document settings
\title{Shipping System Development Guide with GitHub Copilot}
\author{Generated by xAI}
\date{July 04, 2025}

\begin{document}

\maketitle

\section{Introduction}
This guide provides step-by-step commands for using GitHub Copilot in Visual Studio Code to implement the shipping system features outlined in the development plan. Each task includes suggested Copilot prompts and testing points to ensure functionality and security.

\section{Backend Tasks}

\subsection{JWT Login with Cookie}
\begin{itemize}
    \item \textbf{Copilot Command}: "Create a Flask route for /api/login that issues a JWT token and sets it as a cookie"
    \item \textbf{Implementation}: In \texttt{app.py}, use \texttt{flask\_jwt\_extended} to generate and set the token.
    \item \textbf{Testing Point}: After implementation, test with Postman: POST to \texttt{/api/login} with username/password, verify 200 response with cookie.
\end{itemize}

\subsection{Flask Limiter (Prevent Abuse)}
\begin{itemize}
    \item \textbf{Copilot Command}: "Configure Flask-Limiter with memory storage and add rate limit to /api/ping"
    \item \textbf{Implementation}: In \texttt{app.py}, initialize \texttt{Limiter} with \texttt{"5 per minute"} for \texttt{/api/ping}.
    \item \textbf{Testing Point}: Send 6 POST requests to \texttt{/api/ping} within 1 minute; expect 429 on the 6th. If no 429, switch to Redis storage.
\end{itemize}

\subsection{CSRF Protection}
\begin{itemize}
    \item \textbf{Copilot Command}: "Implement CSRF protection using Flask-WTF for /api/upload"
    \item \textbf{Implementation}: In \texttt{app.py}, add \texttt{Flask-WTF} with \texttt{CSRFProtect}, generate tokens in forms.
    \item \textbf{Testing Point}: Submit a form without CSRF token; expect 400. Submit with valid token; expect 200.
\end{itemize}

\subsection{Encryption for Payment URLs}
\begin{itemize}
    \item \textbf{Copilot Command}: "Create a function in encrypt.py to encrypt payment URLs with Fernet"
    \item \textbf{Implementation}: In \texttt{encrypt.py}, use \texttt{cryptography.fernet} for secure token logic.
    \item \textbf{Testing Point}: Encrypt a test URL, decrypt it, and verify match; test in \texttt{payment_link.py}.
\end{itemize}

\section{Frontend Tasks}

\subsection{Review.js - Pagination}
\begin{itemize}
    \item \textbf{Copilot Command}: "Add pagination to fetch calls in Review.js with page and page\_size params"
    \item \textbf{Implementation}: Update \texttt{review.js} to include \texttt{?page=1\&page\_size=50} in \texttt{fetch}.
    \item \textbf{Testing Point}: Fetch \texttt{/api/bills} with different pages; verify correct data subsets.
\end{itemize}

\subsection{Login.js - JWT Storage}
\begin{itemize}
    \item \textbf{Copilot Command}: "Fetch login API and store JWT in cookie in Login.js"
    \item \textbf{Implementation}: Use \texttt{fetch} with \texttt{credentials: 'include'} and store token.
    \item \textbf{Testing Point}: Login, check cookie in browser dev tools, access protected route.
\end{itemize}

\subsection{UploadForm.js - OCR Trigger}
\begin{itemize}
    \item \textbf{Copilot Command}: "Modify UploadForm.js to trigger backend OCR on file upload"
    \item \textbf{Implementation}: Call \texttt{/api/upload} and expect parsed data response.
    \item \textbf{Testing Point}: Upload a PDF, verify parsed fields in response or UI.
\end{itemize}

\subsection{EditBill.js - Parsed Data Display}
\begin{itemize}
    \item \textbf{Copilot Command}: "Display parsed data from extract_fields.py in EditBill.js"
    \item \textbf{Implementation}: Fetch bill data and render fields.
    \item \textbf{Testing Point}: Edit a bill, save, and verify updated data.
\end{itemize}

\subsection{AccountPage.js - Payment Summary}
\begin{itemize}
    \item \textbf{Copilot Command}: "Show 85\% payment summary in AccountPage.js"
    \item \textbf{Implementation}: Fetch \texttt{/api/stats/outstanding_bills} and calculate 85\%.
    \item \textbf{Testing Point}: Verify summary matches backend calculations.
\end{itemize}

\subsection{StaffStats.js - Dashboard}
\begin{itemize}
    \item \textbf{Copilot Command}: "Create a dashboard in StaffStats.js with bill stats"
    \item \textbf{Implementation}: Fetch \texttt{/api/stats/summary} and display metrics.
    \item \textbf{Testing Point}: Check dashboard reflects total bills, completed, pending.
\end{itemize}

\section{Additional Security Tasks}

\subsection{Input Validation}
\begin{itemize}
    \item \textbf{Copilot Command}: "Add input validation for name, email, phone in UploadForm.js"
    \item \textbf{Implementation}: Use regex to sanitize inputs in \texttt{onFinish}.
    \item \textbf{Testing Point}: Submit invalid data (e.g., malformed email); expect error.
\end{itemize}

\subsection{HTTPS Enforcement}
\begin{itemize}
    \item \textbf{Copilot Command}: "Configure Flask to enforce HTTPS in app.py"
    \item \textbf{Implementation}: Use \texttt{FLASK_ENV=production} and proxy settings.
    \item \textbf{Testing Point}: Access via HTTP; expect redirect to HTTPS (post-AWS deployment).
\end{itemize}

\subsection{Audit Logging}
\begin{itemize}
    \item \textbf{Copilot Command}: "Implement audit logging for sensitive operations in app.py"
    \item \textbf{Implementation}: Log actions (e.g., login) to a file or database.
    \item \textbf{Testing Point}: Perform a login, check log file for entry.
\end{itemize}

\section{Deployment and Final Testing}
\begin{itemize}
    \item \textbf{Command}: "Generate Render deployment script for app.py"
    \item \textbf{Implementation}: Create \texttt{Procfile} and \texttt{requirements.txt}.
    \item \textbf{Testing Point}: Deploy to Render, verify all endpoints (e.g., \texttt{/api/ping}, \texttt{/api/upload}) work.
    \item \textbf{Command}: "Prepare AWS/Alibaba Cloud deployment config"
    \item \textbf{Implementation}: Set up Elastic Beanstalk or ECS with HTTPS.
    \item \textbf{Testing Point}: Deploy, test load balancing, and security headers.
\end{itemize}

\end{document}